# KOMAS TRADING SYSTEM ‚Äî MASTER PLAN
> –í–µ—Ä—Å–∏—è: 1.10 | –î–∞—Ç–∞: 2025-12-25 | –°—Ç–∞—Ç—É—Å: –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

---

## üìä –ü–†–û–ì–†–ï–°–°

```
–û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å: ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë 45%

–ß–∞—Ç #00 - –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ:  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100% ‚úÖ
–ß–∞—Ç #01 - Logger/Config: ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100% ‚úÖ
–ß–∞—Ç #02 - Database:      ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100% ‚úÖ
–ß–∞—Ç #03 - Data Manager:  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100% ‚úÖ
–ß–∞—Ç #04 - WebSocket:     ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100% ‚úÖ
–ß–∞—Ç #05 - Base Classes:  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100% ‚úÖ
–ß–∞—Ç #06 - PluginLoader:  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100% ‚úÖ
–ß–∞—Ç #07 - TRG Core:      ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100% ‚úÖ ‚Üê DONE

–≠—Ç–∞–ø 1  - Core:        ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100% ‚úÖ [#01 ‚úÖ, #02 ‚úÖ]
–≠—Ç–∞–ø 2  - Data:        ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100% ‚úÖ [#03 ‚úÖ, #04 ‚úÖ]
–≠—Ç–∞–ø 3  - Indicators:  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100% ‚úÖ [#05 ‚úÖ, #06 ‚úÖ]
–≠—Ç–∞–ø 4  - TRG Plugin:  ‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë 20%    [#07 ‚úÖ, #08-#13] ‚Üê IN PROGRESS
–≠—Ç–∞–ø 5  - API:         ‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë 40%    [#14]
–≠—Ç–∞–ø 6  - Frontend:    ‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë 20%    [#15-#17]
–≠—Ç–∞–ø 7  - Presets:     ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë 0%     [#18-#19]
–≠—Ç–∞–ø 8  - Bots:        ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë 0%     [#20-#22]
–≠—Ç–∞–ø 9  - Telegram:    ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë 0%     [#23]
–≠—Ç–∞–ø 10 - Analytics:   ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë 0%     [#24]
```

---

## üì¶ –ú–û–î–£–õ–ò –ò –°–¢–ê–¢–£–°–´

### TRG PLUGIN ‚Äî –≠–¢–ê–ü 4 (–í –†–ê–ë–û–¢–ï)

| –ú–æ–¥—É–ª—å | –§–∞–π–ª | –°—Ç–∞—Ç—É—Å | –ß–∞—Ç |
|--------|------|--------|-----|
| manifest.json | `plugins/trg/manifest.json` | üü¢ –ì–æ—Ç–æ–≤–æ | #06 ‚úÖ |
| **Indicator Core** | `plugins/trg/indicator.py` | üü¢ –ì–æ—Ç–æ–≤–æ | **#07 ‚úÖ** |
| **Signals** | `plugins/trg/signals.py` | üü¢ –ì–æ—Ç–æ–≤–æ | **#07 ‚úÖ** |
| Trading System | `plugins/trg/trading.py` | üî¥ TODO | #08 |
| Entry/Exit | `plugins/trg/entry_exit.py` | üî¥ TODO | #08 |
| Take Profit | `plugins/trg/take_profit.py` | üî¥ TODO | #09 |
| Stop Loss | `plugins/trg/stop_loss.py` | üî¥ TODO | #09 |
| Re-entry | `plugins/trg/reentry.py` | üî¥ TODO | #09 |
| Filter: SuperTrend | `plugins/trg/filters/supertrend.py` | üî¥ TODO | #10 |
| Filter: RSI | `plugins/trg/filters/rsi.py` | üî¥ TODO | #10 |
| Filter: ADX | `plugins/trg/filters/adx.py` | üî¥ TODO | #10 |
| Filter: Volume | `plugins/trg/filters/volume.py` | üî¥ TODO | #10 |
| Optimizer Engine | `plugins/trg/optimizer.py` | üî¥ TODO | #11 |
| Heatmap | `plugins/trg/heatmap.py` | üî¥ TODO | #11 |
| Backtest Engine | `plugins/trg/backtest.py` | üî¥ TODO | #12 |
| Metrics | `plugins/trg/metrics.py` | üî¥ TODO | #12 |
| UI Schema | `plugins/trg/ui_schema.py` | üî¥ TODO | #13 |

---

## üìú –ò–°–¢–û–†–ò–Ø –î–ï–ô–°–¢–í–ò–ô

### –ß–∞—Ç #07 ‚Äî TRG: Indicator Core (2025-12-25) ‚úÖ

**–ß—Ç–æ —Å–¥–µ–ª–∞–ª–∏:**

1. ‚úÖ –°–æ–∑–¥–∞–ª–∏ `plugins/trg/indicator.py` (~480 —Å—Ç—Ä–æ–∫)
   - TRGIndicator ‚Äî –≥–ª–∞–≤–Ω—ã–π –∫–ª–∞—Å—Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞
   - TRGParameters ‚Äî –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
   - TRGResult ‚Äî —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞—Å—á—ë—Ç–∞
   - TrendDirection ‚Äî enum –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç—Ä–µ–Ω–¥–∞
   - calculate_trg() ‚Äî —Ñ—É–Ω–∫—Ü–∏—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å–æ —Å—Ç–∞—Ä—ã–º API
   - calculate_incremental() ‚Äî –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π —Ä–∞—Å—á—ë—Ç –¥–ª—è real-time

2. ‚úÖ –°–æ–∑–¥–∞–ª–∏ `plugins/trg/signals.py` (~550 —Å—Ç—Ä–æ–∫)
   - TRGSignalGenerator ‚Äî –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å–∏–≥–Ω–∞–ª–æ–≤
   - SignalGeneratorConfig ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
   - Signal ‚Äî dataclass —Å–∏–≥–Ω–∞–ª–∞
   - SignalResult ‚Äî —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
   - –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã: SuperTrend, RSI, ADX, Volume
   - generate_signals() ‚Äî —Ñ—É–Ω–∫—Ü–∏—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

3. ‚úÖ –°–æ–∑–¥–∞–ª–∏ `plugins/trg/__init__.py`
   - –≠–∫—Å–ø–æ—Ä—Ç—ã –≤—Å–µ—Ö –∫–ª–∞—Å—Å–æ–≤
   - get_plugin_info() –¥–ª—è registry
   - get_indicator() / get_signal_generator() entry points

4. ‚úÖ –û–±–Ω–æ–≤–∏–ª–∏ `plugins/trg/manifest.json`
   - –ü–æ–ª–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–ª–∞–≥–∏–Ω–∞
   - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã i1/i2
   - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è UI
   - Entry points

5. ‚úÖ –°–æ–∑–¥–∞–ª–∏ `plugins/trg/tests.py` ‚Äî —Ç–µ—Å—Ç—ã

6. ‚úÖ –°–æ–∑–¥–∞–ª–∏ `test_trg_plugin.bat` ‚Äî –±–∞—Ç–Ω–∏–∫ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–ö–ª—é—á–µ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è:**
- Backward compatibility —Å–æ —Å—Ç–∞—Ä—ã–º indicator_routes.py
- Incremental calculation –¥–ª—è WebSocket real-time
- –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã –≤ SignalGenerator (–Ω–µ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã)
- Dataclasses –¥–ª—è —Ç–∏–ø–∏–∑–∞—Ü–∏–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

**–¢–µ—Å—Ç—ã –ø—Ä–æ—à–ª–∏:**
```
‚úì TRGIndicator: create, calculate, validate
‚úì TRGSignalGenerator: signals, filters
‚úì Backward compatibility: calculate_trg, generate_signals
‚úì Incremental: real-time updates
```

**–ê—Ä—Ç–µ—Ñ–∞–∫—Ç:** `komas_trg_v1.zip`

---

### –°–ª–µ–¥—É—é—â–∏–π —á–∞—Ç:
- **#08** ‚Äî TRG: Trading System (entry, exit, position management)

---

## üìù –ó–ê–ú–ï–¢–ö–ò

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ TRG –ø–ª–∞–≥–∏–Ω–∞ –ø–æ—Å–ª–µ #07:

```
plugins/trg/
‚îú‚îÄ‚îÄ __init__.py          # –≠–∫—Å–ø–æ—Ä—Ç—ã, entry points
‚îú‚îÄ‚îÄ manifest.json        # –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –ø–ª–∞–≥–∏–Ω–∞
‚îú‚îÄ‚îÄ indicator.py         # ‚úÖ TRGIndicator (~480 —Å—Ç—Ä–æ–∫)
‚îú‚îÄ‚îÄ signals.py           # ‚úÖ TRGSignalGenerator (~550 —Å—Ç—Ä–æ–∫)
‚îú‚îÄ‚îÄ tests.py             # ‚úÖ –¢–µ—Å—Ç—ã
‚îÇ
‚îú‚îÄ‚îÄ trading.py           # TODO #08
‚îú‚îÄ‚îÄ entry_exit.py        # TODO #08
‚îú‚îÄ‚îÄ take_profit.py       # TODO #09
‚îú‚îÄ‚îÄ stop_loss.py         # TODO #09
‚îú‚îÄ‚îÄ reentry.py           # TODO #09
‚îú‚îÄ‚îÄ filters/             # TODO #10
‚îú‚îÄ‚îÄ optimizer.py         # TODO #11
‚îú‚îÄ‚îÄ heatmap.py           # TODO #11
‚îú‚îÄ‚îÄ backtest.py          # TODO #12
‚îú‚îÄ‚îÄ metrics.py           # TODO #12
‚îî‚îÄ‚îÄ ui_schema.py         # TODO #13
```

### API –¥–ª—è TRG:

```python
# Indicator
from plugins.trg import TRGIndicator
indicator = TRGIndicator(atr_length=45, multiplier=4.0)
result = indicator.calculate(df)

# Signals
from plugins.trg import TRGSignalGenerator
generator = TRGSignalGenerator(atr_length=45, multiplier=4.0)
signals = generator.generate(df)

# Backward compatible
from plugins.trg import calculate_trg, generate_signals
df = calculate_trg(df, 45, 4.0)
df = generate_signals(df, 45, 4.0)
```

---

## üîÑ –ò–°–¢–û–†–ò–Ø –ò–ó–ú–ï–ù–ï–ù–ò–ô –î–û–ö–£–ú–ï–ù–¢–ê

| –í–µ—Ä—Å–∏—è | –î–∞—Ç–∞ | –ò–∑–º–µ–Ω–µ–Ω–∏—è |
|--------|------|-----------|
| 1.10 | 2025-12-25 | **–ß–∞—Ç #07 –∑–∞–≤–µ—Ä—à—ë–Ω**, TRG Indicator Core –≥–æ—Ç–æ–≤ |
| 1.9 | 2025-12-25 | –ß–∞—Ç #06 –∑–∞–≤–µ—Ä—à—ë–Ω, –≠—Ç–∞–ø 3 (Indicators) –ó–ê–í–ï–†–®–Å–ù |
| 1.8 | 2025-12-25 | –ß–∞—Ç #05 –∑–∞–≤–µ—Ä—à—ë–Ω, –±–∞–∑–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã –≥–æ—Ç–æ–≤—ã |
| 1.7 | 2025-12-25 | –ß–∞—Ç #04 –∑–∞–≤–µ—Ä—à—ë–Ω, –≠—Ç–∞–ø 2 (Data) –ó–ê–í–ï–†–®–Å–ù |
| 1.6 | 2025-12-25 | –ß–∞—Ç #03 –∑–∞–≤–µ—Ä—à—ë–Ω |
| 1.5 | 2025-12-25 | –ß–∞—Ç #02 –∑–∞–≤–µ—Ä—à—ë–Ω, –≠—Ç–∞–ø 1 –≥–æ—Ç–æ–≤ |
| 1.4 | 2025-12-25 | –ß–∞—Ç #01 –∑–∞–≤–µ—Ä—à—ë–Ω |

---

*–î–æ–∫—É–º–µ–Ω—Ç –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∑–∞–≤–µ—Ä—à—ë–Ω–Ω–æ–≥–æ —á–∞—Ç–∞*
