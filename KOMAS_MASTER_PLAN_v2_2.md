# KOMAS TRADING SYSTEM ‚Äî MASTER PLAN
> –í–µ—Ä—Å–∏—è: 2.2 | –î–∞—Ç–∞: 2025-12-25 | –°—Ç–∞—Ç—É—Å: –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

---

## üìã –û–ì–õ–ê–í–õ–ï–ù–ò–ï

1. [–¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞](#-—Ü–µ–ª—å-–ø—Ä–æ–µ–∫—Ç–∞)
2. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
3. [–ú–æ–¥—É–ª–∏ –∏ —Å—Ç–∞—Ç—É—Å—ã](#-–º–æ–¥—É–ª–∏-–∏-—Å—Ç–∞—Ç—É—Å—ã)
4. [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤](#-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-—Ñ–∞–π–ª–æ–≤)
5. [–ß–∞—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏](#-—á–∞—Ç—ã-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
6. [–ü—Ä–∞–≤–∏–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏](#-–ø—Ä–∞–≤–∏–ª–∞-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
7. [API –ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã](#-api-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã)
8. [–ü—Ä–æ–≥—Ä–µ—Å—Å](#-–ø—Ä–æ–≥—Ä–µ—Å—Å)
9. [–ò—Å—Ç–æ—Ä–∏—è –¥–µ–π—Å—Ç–≤–∏–π](#-–∏—Å—Ç–æ—Ä–∏—è-–¥–µ–π—Å—Ç–≤–∏–π)

---

## üéØ –¶–ï–õ–¨ –ü–†–û–ï–ö–¢–ê

**Komas Trading System** ‚Äî –∫–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ç–æ—Ä–≥–æ–≤–ª–∏ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞–º–∏.

### –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
1. **–ü–æ—Ä—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ Pine Script ‚Üí Python** —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤—Å–µ–π –ª–æ–≥–∏–∫–∏
2. **–ú–æ–¥—É–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–ª–∞–≥–∏–Ω–æ–≤** ‚Äî –∫–∞–∂–¥—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω
3. **–ü–æ–ª–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª TradingView** ‚Äî –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è, –±—ç–∫—Ç–µ—Å—Ç, heatmap
4. **Real-time –¥–∞–Ω–Ω—ã–µ** ‚Äî WebSocket —Å—Ç—Ä–∏–º–∏–Ω–≥ —Å Binance
5. **–ë–æ—Ç—ã 24/7** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–∏–≥–Ω–∞–ª—ã –≤ Telegram (Cornix —Ñ–æ—Ä–º–∞—Ç)
6. **–ì–∏–±–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** ‚Äî –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã

### –ü—Ä–∏–Ω—Ü–∏–ø—ã:
- **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å** ‚Äî –∫–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º, —Ñ–∞–π–ª—ã < 500 —Å—Ç—Ä–æ–∫
- **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å** ‚Äî –ø–ª–∞–≥–∏–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
- **–ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å** ‚Äî —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- **–ü—Ä–æ—Å—Ç–æ—Ç–∞ –¥–µ–ø–ª–æ—è** ‚Äî Windows Server, –±–µ–∑ Docker, –±–∞—Ç–Ω–∏–∫–∏

---

## üì¶ –ú–û–î–£–õ–ò –ò –°–¢–ê–¢–£–°–´

### –õ–µ–≥–µ–Ω–¥–∞:
- üî¥ TODO ‚Äî –Ω–µ –Ω–∞—á–∞—Ç–æ
- üü° –ß–∞—Å—Ç–∏—á–Ω–æ ‚Äî –µ—Å—Ç—å –∫–æ–¥, –Ω—É–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å
- üü¢ –ì–æ—Ç–æ–≤–æ ‚Äî –∑–∞–≤–µ—Ä—à–µ–Ω–æ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ

### CORE (–Ø–¥—Ä–æ) ‚úÖ –≠–¢–ê–ü 1 –ó–ê–í–ï–†–®–Å–ù

| –ú–æ–¥—É–ª—å | –§–∞–π–ª | –°—Ç–∞—Ç—É—Å | –ß–∞—Ç |
|--------|------|--------|-----|
| Logger | `core/logger.py` | üü¢ | #01 ‚úÖ |
| Config | `core/config.py` | üü¢ | #01 ‚úÖ |
| Database | `core/database.py` | üü¢ | #02 ‚úÖ |

### DATA (–î–∞–Ω–Ω—ã–µ) ‚úÖ –≠–¢–ê–ü 2 –ó–ê–í–ï–†–®–Å–ù

| –ú–æ–¥—É–ª—å | –§–∞–π–ª | –°—Ç–∞—Ç—É—Å | –ß–∞—Ç |
|--------|------|--------|-----|
| Binance API | `core/data/binance.py` | üü¢ | #03 ‚úÖ |
| Storage | `core/data/storage.py` | üü¢ | #03 ‚úÖ |
| Manager | `core/data/manager.py` | üü¢ | #03 ‚úÖ |
| WebSocket | `core/data/websocket.py` | üü¢ | #04 ‚úÖ |
| WS API | `api/ws.py` | üü¢ | #04 ‚úÖ |

### INDICATORS (–°–∏—Å—Ç–µ–º–∞ –ø–ª–∞–≥–∏–Ω–æ–≤) ‚úÖ –≠–¢–ê–ü 3 –ó–ê–í–ï–†–®–Å–ù

| –ú–æ–¥—É–ª—å | –§–∞–π–ª | –°—Ç–∞—Ç—É—Å | –ß–∞—Ç |
|--------|------|--------|-----|
| BaseIndicator | `indicators/base/indicator.py` | üü¢ | #05 ‚úÖ |
| BaseTradingSystem | `indicators/base/trading.py` | üü¢ | #05 ‚úÖ |
| BaseFilter | `indicators/base/filter.py` | üü¢ | #05 ‚úÖ |
| BaseOptimizer | `indicators/base/optimizer.py` | üü¢ | #05 ‚úÖ |
| BaseBacktest | `indicators/base/backtest.py` | üü¢ | #05 ‚úÖ |
| PluginLoader | `indicators/loader.py` | üü¢ | #06 ‚úÖ |
| Registry | `indicators/registry.py` | üü¢ | #06 ‚úÖ |
| Plugins API | `api/plugins.py` | üü¢ | #06 ‚úÖ |

### TRG PLUGIN üîÑ –≠–¢–ê–ü 4 –í –†–ê–ë–û–¢–ï (50%)

| –ú–æ–¥—É–ª—å | –§–∞–π–ª | –°—Ç–∞—Ç—É—Å | –ß–∞—Ç |
|--------|------|--------|-----|
| manifest.json | `plugins/trg/manifest.json` | üü¢ | #06 ‚úÖ |
| **Indicator Core** | `plugins/trg/indicator.py` | üü¢ | #07 ‚úÖ |
| **Signals** | `plugins/trg/signals.py` | üü¢ | #07 ‚úÖ |
| **Trading System** | `plugins/trg/trading.py` | üü¢ | #08 ‚úÖ |
| Take Profit | (–≤ trading.py) | üü¢ | #08 ‚úÖ |
| Stop Loss | (–≤ trading.py) | üü¢ | #08 ‚úÖ |
| Re-entry | (–≤ trading.py) | üü¢ | #08 ‚úÖ |
| **Filters** | `plugins/trg/filters/` | üü¢ | #09 ‚úÖ |
| Optimizer | `plugins/trg/optimizer.py` | üî¥ | #10 |
| Backtest | `plugins/trg/backtest.py` | üî¥ | #11 |
| UI Schema | `plugins/trg/ui_schema.py` | üî¥ | #12 |

### API (REST)

| –ú–æ–¥—É–ª—å | –§–∞–π–ª | –°—Ç–∞—Ç—É—Å | –ß–∞—Ç |
|--------|------|--------|-----|
| Data API | `api/data.py` | üü¢ | #03 ‚úÖ |
| WebSocket API | `api/ws.py` | üü¢ | #04 ‚úÖ |
| Database API | `api/database.py` | üü¢ | #02 ‚úÖ |
| Plugins API | `api/plugins.py` | üü¢ | #06 ‚úÖ |
| Indicators API | `api/indicators.py` | üî¥ | #13 |

### FRONTEND / PRESETS / BOTS / TELEGRAM ‚Äî TODO

---

## üìÅ –°–¢–†–£–ö–¢–£–†–ê –§–ê–ô–õ–û–í

```
komas/
‚îú‚îÄ‚îÄ backend/
‚îÇ   ‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ main.py                    # FastAPI (v3.7) ‚úÖ
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ core/                      # ‚ïê‚ïê‚ïê –Ø–î–†–û ‚ïê‚ïê‚ïê ‚úÖ
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config.py              # Pydantic Settings
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ logger.py              # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ database.py            # SQLite
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ data/                  # –î–∞–Ω–Ω—ã–µ ‚úÖ
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ binance.py
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ storage.py
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ manager.py
‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ websocket.py
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ indicators/                # ‚ïê‚ïê‚ïê –ò–ù–î–ò–ö–ê–¢–û–†–´ ‚ïê‚ïê‚ïê ‚úÖ
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ registry.py            # –†–µ–µ—Å—Ç—Ä (~581 —Å—Ç—Ä–æ–∫)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ loader.py              # –ó–∞–≥—Ä—É–∑—á–∏–∫ (~710 —Å—Ç—Ä–æ–∫)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ base/                  # –ë–∞–∑–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã ‚úÖ
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ indicator.py       # (~380 —Å—Ç—Ä–æ–∫)
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ trading.py         # (~500 —Å—Ç—Ä–æ–∫)
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ filter.py          # (~480 —Å—Ç—Ä–æ–∫)
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ optimizer.py       # (~520 —Å—Ç—Ä–æ–∫)
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ backtest.py        # (~450 —Å—Ç—Ä–æ–∫)
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ plugins/
‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ trg/               # TRG Plugin üîÑ 50%
‚îÇ   ‚îÇ   ‚îÇ           ‚îú‚îÄ‚îÄ manifest.json  # ‚úÖ v1.2.0
‚îÇ   ‚îÇ   ‚îÇ           ‚îú‚îÄ‚îÄ __init__.py    # ‚úÖ
‚îÇ   ‚îÇ   ‚îÇ           ‚îú‚îÄ‚îÄ indicator.py   # ‚úÖ (~420 —Å—Ç—Ä–æ–∫)
‚îÇ   ‚îÇ   ‚îÇ           ‚îú‚îÄ‚îÄ signals.py     # ‚úÖ (~380 —Å—Ç—Ä–æ–∫)
‚îÇ   ‚îÇ   ‚îÇ           ‚îú‚îÄ‚îÄ trading.py     # ‚úÖ (~580 —Å—Ç—Ä–æ–∫)
‚îÇ   ‚îÇ   ‚îÇ           ‚îú‚îÄ‚îÄ filters/       # ‚úÖ NEW! (~1200 —Å—Ç—Ä–æ–∫)
‚îÇ   ‚îÇ   ‚îÇ           ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îÇ           ‚îÇ   ‚îú‚îÄ‚îÄ config.py
‚îÇ   ‚îÇ   ‚îÇ           ‚îÇ   ‚îú‚îÄ‚îÄ manager.py
‚îÇ   ‚îÇ   ‚îÇ           ‚îÇ   ‚îú‚îÄ‚îÄ supertrend.py
‚îÇ   ‚îÇ   ‚îÇ           ‚îÇ   ‚îú‚îÄ‚îÄ rsi.py
‚îÇ   ‚îÇ   ‚îÇ           ‚îÇ   ‚îú‚îÄ‚îÄ adx.py
‚îÇ   ‚îÇ   ‚îÇ           ‚îÇ   ‚îî‚îÄ‚îÄ volume.py
‚îÇ   ‚îÇ   ‚îÇ           ‚îú‚îÄ‚îÄ optimizer.py   # ‚Üê #10
‚îÇ   ‚îÇ   ‚îÇ           ‚îú‚îÄ‚îÄ backtest.py    # ‚Üê #11
‚îÇ   ‚îÇ   ‚îÇ           ‚îî‚îÄ‚îÄ ui_schema.py   # ‚Üê #12
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ api/                       # ‚ïê‚ïê‚ïê REST API ‚ïê‚ïê‚ïê
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ data.py                # ‚úÖ
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ ws.py                  # ‚úÖ
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ database.py            # ‚úÖ
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ plugins.py             # ‚úÖ
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ indicator_routes.py    # (legacy)
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ data/                          # Parquet —Ñ–∞–π–ª—ã
‚îÇ   ‚îú‚îÄ‚îÄ logs/                          # –õ–æ–≥–∏
‚îÇ   ‚îî‚îÄ‚îÄ requirements.txt
‚îÇ
‚îú‚îÄ‚îÄ frontend/                          # React (legacy)
‚îÇ
‚îú‚îÄ‚îÄ install.bat
‚îú‚îÄ‚îÄ install_trg_deps.bat               # ‚úÖ
‚îú‚îÄ‚îÄ test_trg_filters.bat               # ‚úÖ NEW!
‚îú‚îÄ‚îÄ start.bat
‚îî‚îÄ‚îÄ stop.bat
```

---

## üí¨ –ß–ê–¢–´ –†–ê–ó–†–ê–ë–û–¢–ö–ò

### –≠–¢–ê–ü 1: CORE ‚úÖ –ó–ê–í–ï–†–®–Å–ù
| # | –ù–∞–∑–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|---|----------|--------|
| 01 | `Komas #01 ‚Äî Core: Logger –∏ Config` | ‚úÖ |
| 02 | `Komas #02 ‚Äî Core: Database` | ‚úÖ |

### –≠–¢–ê–ü 2: DATA ‚úÖ –ó–ê–í–ï–†–®–Å–ù
| # | –ù–∞–∑–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|---|----------|--------|
| 03 | `Komas #03 ‚Äî Data: Manager –∏ Binance` | ‚úÖ |
| 04 | `Komas #04 ‚Äî Data: WebSocket Live` | ‚úÖ |

### –≠–¢–ê–ü 3: INDICATORS ‚úÖ –ó–ê–í–ï–†–®–Å–ù
| # | –ù–∞–∑–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|---|----------|--------|
| 05 | `Komas #05 ‚Äî Indicators: –ë–∞–∑–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã` | ‚úÖ |
| 06 | `Komas #06 ‚Äî Indicators: PluginLoader` | ‚úÖ |

### –≠–¢–ê–ü 4: TRG PLUGIN üîÑ –í –†–ê–ë–û–¢–ï
| # | –ù–∞–∑–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|---|----------|--------|
| 07 | `Komas #07 ‚Äî TRG: Indicator Core` | ‚úÖ |
| 08 | `Komas #08 ‚Äî TRG: Trading System` | ‚úÖ |
| 09 | `Komas #09 ‚Äî TRG: Filters` | ‚úÖ **DONE** |
| 10 | `Komas #10 ‚Äî TRG: Optimizer` | ‚è≥ **NEXT** |
| 11 | `Komas #11 ‚Äî TRG: Backtest` | ‚è≥ |
| 12 | `Komas #12 ‚Äî TRG: UI Schema` | ‚è≥ |

### –≠–¢–ê–ü 5+: API, Frontend, Bots, Telegram
| # | –ù–∞–∑–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|---|----------|--------|
| 13 | `Komas #13 ‚Äî API: Indicators` | ‚è≥ |
| 14-16 | Frontend | ‚è≥ |
| 17-18 | Presets | ‚è≥ |
| 19-21 | Bots | ‚è≥ |
| 22 | Telegram | ‚è≥ |

---

## ‚ö†Ô∏è –ü–†–ê–í–ò–õ–ê –†–ê–ó–†–ê–ë–û–¢–ö–ò

### üö´ –ó–ê–ü–†–ï–©–ï–ù–û:
1. –£—Ä–µ–∑–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –±–µ–∑ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è
2. –£–¥–∞–ª—è—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –±–µ–∑ —Å–ø—Ä–æ—Å–∞
3. –í—ã–≥—Ä—É–∂–∞—Ç—å –∫–æ–¥ —Ç–µ–∫—Å—Ç–æ–º (—Ç–æ–ª—å–∫–æ ZIP!)
4. **–ù–ò–ö–ê–ö–ò–• –∑–∞–≥–ª—É—à–µ–∫** ‚Äî –≤—Å–µ–≥–¥–∞ –ø–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### ‚úÖ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û:
1. –í—ã–≥—Ä—É–∑–∫–∞ –∫–æ–¥–∞ –¢–û–õ–¨–ö–û –≤ ZIP
2. –°–æ–∑–¥–∞–≤–∞—Ç—å .bat –¥–ª—è pip/npm install
3. –°–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –≤ main.py
4. –ò—Å–ø—Ä–∞–≤–ª—è—Ç—å –æ—à–∏–±–∫–∏ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ
5. **–ö–û–î–ò–†–û–í–ö–ê:** `encoding='utf-8'` –ø—Ä–∏ `open()` –Ω–∞ Windows

---

## üìä –ü–†–û–ì–†–ï–°–°

```
–≠—Ç–∞–ø 1 - Core:        ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100% ‚úÖ
–≠—Ç–∞–ø 2 - Data:        ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100% ‚úÖ
–≠—Ç–∞–ø 3 - Indicators:  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100% ‚úÖ
–≠—Ç–∞–ø 4 - TRG Plugin:  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë 50%  [#07-#09 ‚úÖ, #10-#12]
```

### –ó–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ —á–∞—Ç—ã (10):

| –ß–∞—Ç | –ù–∞–∑–≤–∞–Ω–∏–µ | –ê—Ä—Ç–µ—Ñ–∞–∫—Ç |
|-----|----------|----------|
| #00 | –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ | Master Plan |
| #01 | Core: Logger –∏ Config | komas_core_v1.zip |
| #02 | Core: Database | database.py + API |
| #03 | Data: Manager –∏ Binance | komas_data_v1.zip |
| #04 | Data: WebSocket Live | komas_ws_v1.zip |
| #05 | Indicators: Base Classes | komas_indicators_v1.zip |
| #06 | Indicators: PluginLoader | komas_plugins_v1.zip |
| #07 | TRG: Indicator Core | komas_trg_v1.zip |
| #08 | TRG: Trading System | komas_trg_trading_v1.zip |
| #09 | **TRG: Filters** | komas_trg_filters_v1.zip |

---

## üìú –ò–°–¢–û–†–ò–Ø –î–ï–ô–°–¢–í–ò–ô

### –ß–∞—Ç #09 ‚Äî TRG: Filters (2025-12-25) ‚úÖ

**–ß—Ç–æ —Å–¥–µ–ª–∞–ª–∏:**

1. ‚úÖ –°–æ–∑–¥–∞–ª–∏ `plugins/trg/filters/` (~1200 —Å—Ç—Ä–æ–∫)
   - `__init__.py` ‚Äî —ç–∫—Å–ø–æ—Ä—Ç—ã
   - `config.py` (~220 —Å—Ç—Ä–æ–∫) ‚Äî TRGFilterConfig, –ø—Ä–µ—Å–µ—Ç—ã
   - `manager.py` (~350 —Å—Ç—Ä–æ–∫) ‚Äî TRGFilterManager
   - `supertrend.py` (~280 —Å—Ç—Ä–æ–∫) ‚Äî SuperTrend —Ñ–∏–ª—å—Ç—Ä
   - `rsi.py` (~260 —Å—Ç—Ä–æ–∫) ‚Äî RSI —Ñ–∏–ª—å—Ç—Ä
   - `adx.py` (~290 —Å—Ç—Ä–æ–∫) ‚Äî ADX —Ñ–∏–ª—å—Ç—Ä
   - `volume.py` (~250 —Å—Ç—Ä–æ–∫) ‚Äî Volume —Ñ–∏–ª—å—Ç—Ä

2. ‚úÖ –°–æ–∑–¥–∞–ª–∏ `test_filters.py` (~500 —Å—Ç—Ä–æ–∫)
   - 11 —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

3. ‚úÖ –°–æ–∑–¥–∞–ª–∏ `test_trg_filters.bat`

4. ‚úÖ –°–æ–∑–¥–∞–ª–∏ `FILTERS_README.md`

**–¢–µ—Å—Ç—ã –ø—Ä–æ—à–ª–∏:**
```
‚úÖ SuperTrend Filter: PASSED
‚úÖ RSI Filter: PASSED
‚úÖ ADX Filter: PASSED
‚úÖ Volume Filter: PASSED
‚úÖ TRGFilterConfig: PASSED
‚úÖ Filter Presets: PASSED
‚úÖ TRGFilterManager: PASSED
‚úÖ generate_filter_configs: PASSED
‚úÖ apply_filter_config: PASSED
‚úÖ generate_signals_with_filters: PASSED
‚úÖ Full Integration: PASSED
üéâ ALL 11 TESTS PASSED!
```

**–ê—Ä—Ç–µ—Ñ–∞–∫—Ç:** `komas_trg_filters_v1.zip`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Ñ–∏–ª—å—Ç—Ä–æ–≤:**
- SuperTrend ‚Äî —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—é —Ç—Ä–µ–Ω–¥–∞
- RSI ‚Äî –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–∏ –ø–µ—Ä–µ–∫—É–ø–ª–µ–Ω–Ω–æ—Å—Ç–∏/–ø–µ—Ä–µ–ø—Ä–æ–¥–∞–Ω–Ω–æ—Å—Ç–∏
- ADX ‚Äî –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–∏ —Å–ª–∞–±–æ–º —Ç—Ä–µ–Ω–¥–µ (—Ñ–ª—ç—Ç)
- Volume ‚Äî –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–∏ –Ω–∏–∑–∫–æ–º –æ–±—ä—ë–º–µ
- 11 –ø—Ä–µ—Å–µ—Ç–æ–≤ (none, supertrend_only, all, conservative, aggressive, etc.)
- 45 –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- –ü–æ–ª–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å legacy API

---

### –ß–∞—Ç #08 ‚Äî TRG: Trading System (2025-12-25) ‚úÖ

**–ß—Ç–æ —Å–¥–µ–ª–∞–ª–∏:**

1. ‚úÖ –°–æ–∑–¥–∞–ª–∏ `plugins/trg/trading.py` (~580 —Å—Ç—Ä–æ–∫)
   - TRGTradingConfig ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è TP/SL/Re-entry
   - TRGPosition ‚Äî —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏
   - TRGTradingSystem ‚Äî –ø–æ–ª–Ω–∞—è —Ç–æ—Ä–≥–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞
   - Partial TP closes (–¥–æ 10 —É—Ä–æ–≤–Ω–µ–π)
   - Trailing SL (fixed/breakeven/cascade)
   - Re-entry –ø–æ—Å–ª–µ SL/TP
   - Leverage –∏ commission

2. ‚úÖ –°–æ–∑–¥–∞–ª–∏ `test_trading.py` (~400 —Å—Ç—Ä–æ–∫)
   - 28 —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

**–ê—Ä—Ç–µ—Ñ–∞–∫—Ç:** `komas_trg_trading_v1.zip`

---

### –ß–∞—Ç #07 ‚Äî TRG: Indicator Core (2025-12-25) ‚úÖ

**–°–æ–∑–¥–∞–Ω–æ:**
- `plugins/trg/indicator.py` (~420 —Å—Ç—Ä–æ–∫) ‚Äî TRGIndicator
- `plugins/trg/signals.py` (~380 —Å—Ç—Ä–æ–∫) ‚Äî TRGSignalGenerator

**–ê—Ä—Ç–µ—Ñ–∞–∫—Ç:** `komas_trg_v1.zip`

---

## üîå API –ö–û–ù–¢–†–ê–ö–¢–´

### Data API ‚úÖ

```
GET    /api/data/symbols              # –°–ø–∏—Å–æ–∫ –ø–∞—Ä Binance
GET    /api/data/available            # –ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
POST   /api/data/download             # –ó–∞–ø—É—Å–∫ –∑–∞–≥—Ä—É–∑–∫–∏
GET    /api/data/download/progress    # –ü—Ä–æ–≥—Ä–µ—Å—Å
POST   /api/data/download/cancel/{id} # –û—Ç–º–µ–Ω–∞
POST   /api/data/sync                 # –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
DELETE /api/data/file/{name}          # –£–¥–∞–ª–µ–Ω–∏–µ
POST   /api/data/continue/{s}/{tf}    # –î–æ–∫–∞—á–∫–∞
```

### WebSocket API ‚úÖ

```
GET    /api/ws/status                 # –°—Ç–∞—Ç—É—Å
POST   /api/ws/connect                # –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è
POST   /api/ws/subscribe              # –ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è
GET    /api/ws/prices                 # –ö—ç—à —Ü–µ–Ω

# SSE
GET    /api/ws/sse/prices             # –°—Ç—Ä–∏–º —Ü–µ–Ω
GET    /api/ws/sse/klines             # –°—Ç—Ä–∏–º —Å–≤–µ—á–µ–π
GET    /api/ws/sse/trades             # –°—Ç—Ä–∏–º —Å–¥–µ–ª–æ–∫
```

### Database API ‚úÖ

```
GET    /api/db/info                   # –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
GET    /api/db/settings               # –ù–∞—Å—Ç—Ä–æ–π–∫–∏
POST   /api/db/settings               # –°–æ–∑–¥–∞—Ç—å
GET    /api/db/presets                # –ü—Ä–µ—Å–µ—Ç—ã
POST   /api/db/presets                # –°–æ–∑–¥–∞—Ç—å –ø—Ä–µ—Å–µ—Ç
```

### Plugins API ‚úÖ

```
GET    /api/plugins/list              # –°–ø–∏—Å–æ–∫
GET    /api/plugins/{id}              # –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
GET    /api/plugins/{id}/schema       # UI —Å—Ö–µ–º–∞
POST   /api/plugins/{id}/calculate    # –†–∞—Å—á—ë—Ç
POST   /api/plugins/{id}/backtest     # –ë—ç–∫—Ç–µ—Å—Ç
POST   /api/plugins/{id}/optimize     # –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (SSE)
POST   /api/plugins/reload            # –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞
```

---

## üìã –†–ï–§–ï–†–ï–ù–°–´

### –ß—Ç–æ –ø–æ—Ä—Ç–∏—Ä—É–µ–º –∏–∑ indicator_routes.py (2000+ —Å—Ç—Ä–æ–∫):
- ‚úÖ calculate_trg ‚Üí indicator.py
- ‚úÖ generate_signals ‚Üí signals.py
- ‚úÖ run_backtest ‚Üí trading.py
- ‚úÖ calculate_supertrend ‚Üí filters/supertrend.py
- ‚úÖ calculate_rsi ‚Üí filters/rsi.py
- ‚úÖ calculate_adx ‚Üí filters/adx.py
- ‚úÖ calculate_volume ‚Üí filters/volume.py
- ‚úÖ generate_filter_configs ‚Üí filters/manager.py
- üî¥ auto_optimize ‚Üí optimizer.py
- üî¥ generate_heatmap ‚Üí optimizer.py

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä–µ—à–µ–Ω–∏—è:
- **–ë–∞–∑–∞:** SQLite + SQLAlchemy async
- **–î–∞–Ω–Ω—ã–µ:** Parquet (—Å–∂–∞—Ç–∏–µ, –±—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø)
- **WebSocket:** Auto-reconnect, exponential backoff
- **–ü–ª–∞–≥–∏–Ω—ã:** manifest.json + –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç
- **–ö–æ–¥–∏—Ä–æ–≤–∫–∞:** UTF-8 –≤–µ–∑–¥–µ (Windows!)

---

*–î–æ–∫—É–º–µ–Ω—Ç –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∑–∞–≤–µ—Ä—à—ë–Ω–Ω–æ–≥–æ —á–∞—Ç–∞*
